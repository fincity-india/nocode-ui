{
	"name": "getAppData",
	"namespace": "UIApp",
	"parameters": {},
	"events": {
		"output": {
			"name": "output",
			"parameters": {
				"appData": {
					"name": "appData",
					"type": "Object"
				}
			}
		}
	},
	"steps": {
		"verifyToken": {
			"statementName": "verifyToken",
			"namespace": "UIEngine",
			"name": "FetchData",
			"parameterMap": {
				"url": {
					"verifyTokenUrl": {
						"key": "verifyTokenUrl",
						"type": "VALUE",
						"value": "/api/security/verifyToken"
					}
				}
			}
		},
		"setLoginData": {
			"statementName": "setLoginData",
			"namespace": "UIEngine",
			"name": "SetStore",
			"parameterMap": {
				"path": {
					"setLoginDataPath": {
						"key": "setLoginDataPath",
						"type": "VALUE",
						"value": "Store.auth"
					}
				},
				"value": {
					"setLoginDataValue": {
						"key": "setLoginDataValue",
						"type": "EXPRESSION",
						"expression": "Steps.verifyToken.output.data"
					}
				}
			},
			"dependentStatements": { "Steps.verifyToken.output": true }
		},
		"setLoginFailureData": {
			"statementName": "setLoginFailureData",
			"namespace": "UIEngine",
			"name": "SetStore",
			"parameterMap": {
				"path": {
					"setLoginFailureDataPath": {
						"key": "setLoginFailureDataPath",
						"type": "VALUE",
						"value": "Store.isAuthenticated"
					}
				},
				"value": {
					"setLoginFailureDataValue": {
						"key": "setLoginFailureDataValue",
						"type": "EXPRESSION",
						"expression": "null != Steps.verifyToken.output.data.user.id"
					}
				}
			},
			"dependentStatements": { "Steps.verifyToken.output": true }
		},
		"applicationData": {
			"statementName": "applicationData",
			"namespace": "UIEngine",
			"name": "FetchData",
			"parameterMap": {
				"url": {
					"applicationDataUrl": {
						"key": "applicationDataUrl",
						"type": "VALUE",
						"value": "/application"
					}
				}
			},
			"dependentStatements": { "Steps.setLoginData.output": true }
		},
		"setAppData": {
			"statementName": "setAppData",
			"namespace": "UIEngine",
			"name": "SetStore",
			"parameterMap": {
				"path": {
					"setAppDataPath": {
						"key": "setAppDataPath",
						"type": "VALUE",
						"value": "Store.application"
					}
				},
				"value": {
					"setAppDataValue": {
						"key": "setAppDataValue",
						"type": "EXPRESSION",
						"expression": "Steps.applicationData.output.data"
					}
				}
			},
			"dependentStatements": { "Steps.applicationData.output": true }
		},
		"setLanguage": {
			"statementName": "setLanguage",
			"namespace": "UIEngine",
			"name": "SetStore",
			"parameterMap": {
				"path": {
					"setLanguagePath": {
						"key": "setLanguagePath",
						"type": "VALUE",
						"value": "Store.currentLanguage"
					}
				},
				"value": {
					"setLanguageValue": {
						"key": "setLanguageValue",
						"type": "EXPRESSION",
						"expression": "Store.auth.localeCode??Store.application.defaultLanguage"
					}
				}
			}
		},
		"setApplicationFailureData": {
			"statementName": "setApplicationFailureData",
			"namespace": "UIEngine",
			"name": "SetStore",
			"parameterMap": {
				"path": {
					"setApplicationFailureDataPath": {
						"key": "setApplicationFailureDataPath",
						"type": "VALUE",
						"value": "Store.isApplicationLoadFailed"
					}
				},
				"value": {
					"setApplicationFailureDataValue": {
						"key": "setApplicationFailureDataValue",
						"type": "EXPRESSION",
						"expression": "null = Steps.applicationData.output.data.name"
					}
				}
			},
			"dependentStatements": { "Steps.applicationData.output": true }
		},
		"constructPrefix": {
			"statementName": "constructPrefix",
			"namespace": "UIEngine",
			"name": "ConstructURLPrefix",
			"parameterMap": {
				"clientDetails": {
					"constructPrefixClientDetails": {
						"key": "constructPrefixClientDetails",
						"type": "EXPRESSION",
						"expression": "Store.clientDetails"
					}
				},
				"defaultPage": {
					"constructPrefixDefaultPage": {
						"key": "constructPrefixDefaultPage",
						"type": "EXPRESSION",
						"expression": "Steps.applicationData.output.data.defaultPage"
					}
				}
			},
			"dependentStatements": { "Steps.applicationData.output": true }
		},
		"pageDefinition": {
			"statementName": "pageDefinition",
			"namespace": "UIEngine",
			"name": "FetchData",
			"parameterMap": {
				"url": {
					"pageDefinitionUrl": {
						"key": "pageDefinitionUrl",
						"type": "EXPRESSION",
						"expression": "(Store.prefix ?? '') + '/api/ui/page/' + (Store.clientDetails.pagename ?? Store.application.defaultPage)"
					}
				},
				"headers": {
					"hparam": {
						"key": "hparam",
						"type": "VALUE",
						"value": {
							"Accept-Language": {
								"location": {
									"expression": "Store.auth.localeCode??Store.application.defaultLanguage??'en'",
									"type": "EXPRESSION"
								}
							}
						}
					}
				}
			},
			"dependentStatements": { "Steps.constructPrefix.output": true }
		},
		"setPageDefinition": {
			"statementName": "setPageDefinition",
			"namespace": "UIEngine",
			"name": "SetStore",
			"parameterMap": {
				"path": {
					"setPageDefinitionPath": {
						"key": "setPageDefinitionPath",
						"type": "EXPRESSION",
						"expression": "'Store.pageDefinition.{{Store.clientDetails.pagename ?? Store.application.defaultPage}}'"
					}
				},
				"value": {
					"setPageDefinitionValue": {
						"key": "setPageDefinitionValue",
						"type": "EXPRESSION",
						"expression": "Steps.pageDefinition.output.data"
					}
				}
			},
			"dependentStatements": { "Steps.pageDefinition.output": true }
		},
		"setPageDefinitionFailureData": {
			"statementName": "setPageDefinitionFailureData",
			"namespace": "UIEngine",
			"name": "SetStore",
			"parameterMap": {
				"path": {
					"setPageDefinitionFailureDataPath": {
						"key": "setPageDefinitionFailureDataPath",
						"type": "VALUE",
						"value": "Store.isPageLoadFailed"
					}
				},
				"value": {
					"setPageDefinitionFailureDataValue": {
						"key": "setPageDefinitionFailureDataValue",
						"type": "EXPRESSION",
						"expression": "null = Steps.pageDefinition.output.data.name"
					}
				}
			},
			"dependentStatements": { "Steps.pageDefinition.output": true }
		},
		"setLocationForRepeatorTesting": {
			"statementName": "setLocationForRepeatorTesting",
			"namespace": "UIEngine",
			"name": "SetStore",
			"parameterMap": {
				"path": {
					"setLocationForRepeatorTestingPath": {
						"key": "setLocationForRepeatorTestingPath",
						"type": "VALUE",
						"value": "Store.repeatorTesting"
					}
				},
				"value": {
					"setLocationForRepeatorTestingValue": {
						"key": "setLocationForRepeatorTestingValue",
						"type": "VALUE",
						"value": [
							{
								"name": "Raja",
								"buttons": [
									{ "label": "Testing" },
									{ "label": "Repeator" }
								]
							},
							{
								"name": "Avinash",
								"buttons": [
									{ "label": "Testing" },
									{ "label": "Repeator" }
								]
							},
							{
								"name": "Alli",
								"buttons": [
									{ "label": "Testing" },
									{ "label": "Repeator" }
								]
							}
						]
					}
				}
			},
			"dependentStatements": { "Steps.pageDefinition.output": true }
		},
		"genOutput": {
			"statementName": "genOutput",
			"namespace": "System",
			"name": "GenerateEvent",
			"parameterMap": {
				"eventName": {
					"genOutputEventName": {
						"key": "genOutputEventName",
						"type": "VALUE",
						"value": "output"
					}
				},
				"results": {
					"genOutputResults": {
						"key": "genOutputResults",
						"type": "VALUE",
						"value": {
							"name": "appData",
							"value": {
								"isExpression": true,
								"value": "Steps.pageDefinition.output.data"
							}
						}
					}
				}
			}
		}
	}
}
